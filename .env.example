# Karat Tracker Environment Configuration
# Copy this file to .env for local development
# For Coolify deployment, set these in Coolify's Environment Variables section

# ===========================================
# POSTGREST CONFIGURATION (Required)
# ===========================================

# Database connection URI (URL-encoded password)
# Format: postgres://user:password@host:port/database
# Note: Special characters in password must be URL-encoded
PGRST_DB_URI=postgres://authenticator:YOUR_PASSWORD_HERE@YOUR_DB_HOST:5432/YOUR_DB_NAME

# Database schemas to expose
PGRST_DB_SCHEMAS=public

# Anonymous role (for public access)
PGRST_DB_ANON_ROLE=web_anon

# JWT Secret for authentication (MUST match database)
# Generate: openssl rand -base64 32
PGRST_JWT_SECRET=your-super-secret-jwt-key-change-this

# Server configuration
PGRST_SERVER_HOST=*
PGRST_SERVER_PORT=3000

# API URL for OpenAPI documentation
PGRST_OPENAPI_SERVER_PROXY_URI=http://localhost:3000

# ===========================================
# FRONTEND BUILD ARGUMENTS (Required)
# ===========================================

# API URL that frontend will use (must be publicly accessible)
VITE_API_URL=http://localhost:3000

# Application metadata
VITE_APP_NAME=Karat Tracker
VITE_APP_VERSION=2.0.0

# ===========================================
# OPTIONAL CONFIGURATION
# ===========================================

# OpenAI API Key (for AI features)
VITE_OPENAI_API_KEY=sk-your-openai-api-key-here

# ===========================================
# COOLIFY DEPLOYMENT INSTRUCTIONS
# ===========================================
#
# 1. Deploy PostgREST Service:
#    - Image: postgrest/postgrest:v12.0.3
#    - Set environment variables:
#      * PGRST_DB_URI (with your database connection)
#      * PGRST_DB_SCHEMAS=public
#      * PGRST_DB_ANON_ROLE=web_anon
#      * PGRST_JWT_SECRET (your secret)
#      * PGRST_SERVER_HOST=*
#      * PGRST_SERVER_PORT=3000
#      * PGRST_OPENAPI_SERVER_PROXY_URI=https://api.yourdomain.com
#
# 2. Deploy Frontend Service:
#    - Build from GitHub repository
#    - Dockerfile: ./Dockerfile
#    - Set build arguments:
#      * VITE_API_URL=https://api.yourdomain.com
#      * VITE_APP_NAME=Karat Tracker
#      * VITE_APP_VERSION=2.0.0
#
# ===========================================
# URL ENCODING PASSWORDS
# ===========================================
#
# Special characters in passwords must be URL-encoded:
# / = %2F
# + = %2B
# = = %3D
# @ = %40
# : = %3A
# ? = %3F
# # = %23
# & = %26
#
# Example:
# Password: abc+def/123=
# Encoded:  abc%2Bdef%2F123%3D
#
# Online encoder: https://www.urlencoder.org/
#
# ===========================================
# SECURITY NOTES
# ===========================================
#
# - NEVER commit .env files with real credentials
# - Generate strong secrets: openssl rand -base64 32
# - Rotate secrets regularly
# - Use HTTPS in production
# - Keep JWT_SECRET secure and consistent
